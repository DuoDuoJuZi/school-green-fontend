import{r as a,f as s,c as l,w as t,i as e,o as r,a as u,b as c,h as o,j as i,F as n,k as d,m,e as f,x as p,n as _,t as g,C as v,d as y}from"./index-CuaaJPDA.js";import{o as h}from"./uni-app.es.l4NMnEKD.js";import{r as k}from"./request.CEomxEkn.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=b({__name:"gallery",setup(b){const w=["全部","校园风光","微观生态","绿色生活","动植物","天空"],x=a("全部"),C=a([]);h((()=>{(async()=>{try{const a=await k({url:"/gallery/list",hideErrorToast:!0});a.data&&(C.value=a.data)}catch(a){}})()}));const j=s((()=>"全部"===x.value?C.value:C.value.filter((a=>a.category===x.value)))),F=a=>a?a.startsWith("http")?a:"https://kkbaemygbrzk.ap-northeast-1.clawcloudrun.com"+a:"",z=()=>{m({url:"/pages/gallery/upload"})};return(a,s)=>{const m=f,h=e,k=p,b=y;return r(),l(h,{class:"page"},{default:t((()=>[u(h,{class:"header"},{default:t((()=>[u(m,{class:"page-title"},{default:t((()=>[c("生态瞬间")])),_:1}),u(m,{class:"page-desc"},{default:t((()=>[c("定格校园自然之美，分享你的绿色生活")])),_:1})])),_:1}),u(k,{"scroll-x":"",class:"category-scroll","show-scrollbar":!1},{default:t((()=>[u(h,{class:"category-tabs"},{default:t((()=>[(r(),o(n,null,i(w,((a,s)=>u(h,{class:_(["tab-item",{active:x.value===a}]),key:s,onClick:s=>(a=>{x.value=a})(a)},{default:t((()=>[c(g(a),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1}),u(h,{class:"gallery-flow"},{default:t((()=>[(r(!0),o(n,null,i(j.value,((a,s)=>(r(),l(h,{class:"gallery-item",key:s,onClick:a=>(a=>{const s=j.value.map((a=>F(a.img)));v({current:a,urls:s})})(s)},{default:t((()=>[u(b,{src:F(a.img),mode:"widthFix",class:"gallery-img"},null,8,["src"]),u(h,{class:"item-info"},{default:t((()=>[u(m,{class:"item-title"},{default:t((()=>[c(g(a.title),1)])),_:2},1024),u(h,{class:"item-meta"},{default:t((()=>[u(m,{class:"item-tag"},{default:t((()=>[c("#"+g(a.category),1)])),_:2},1024)])),_:2},1024),u(h,{class:"user-row"},{default:t((()=>{var s,l;return[u(b,{src:(l=null==(s=a.user)?void 0:s.avatar,l?l.startsWith("http")?l:"https://kkbaemygbrzk.ap-northeast-1.clawcloudrun.com"+l:"/static/avatar.png"),class:"user-avatar",mode:"aspectFill"},null,8,["src"]),u(m,{class:"user-name"},{default:t((()=>{var s;return[c(g((null==(s=a.user)?void 0:s.username)||a.author||"匿名"),1)]})),_:2},1024)]})),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),0===j.value.length?(r(),l(h,{key:0,class:"empty-state"},{default:t((()=>[u(m,null,{default:t((()=>[c("暂无相关照片")])),_:1})])),_:1})):d("",!0),u(h,{class:"fab-btn",onClick:z},{default:t((()=>[u(m,{class:"plus-icon"},{default:t((()=>[c("+")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-0c7c0058"]]);export{w as default};
