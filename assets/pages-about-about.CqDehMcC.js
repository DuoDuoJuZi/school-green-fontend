import{r as a,l as e,y as l,c as s,w as t,i as u,o as c,a as n,K as r,h as i,b as o,t as d,F as f,k as _,m as g,v as m,L as p,B as v,d as y,e as k,D as b,q as h,E as x,u as C}from"./index-CuaaJPDA.js";import{_ as w}from"./logo.rRFpfryy.js";import{o as j}from"./uni-app.es.l4NMnEKD.js";import{r as I}from"./request.CEomxEkn.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";const F=z({__name:"about",setup(z){const F=a(null);j((()=>{q()}));const q=async()=>{const a=e("token"),s=e("userInfo");if(s&&(F.value=s),a)try{const a=await I({url:"/user/profile",hideErrorToast:!0});F.value=a.data,l("userInfo",a.data)}catch(t){}else F.value=null},B=()=>{F.value||g({url:"/pages/login/login"})},D=()=>{if(!F.value)return B();b({count:1,sizeType:["compressed"],success:a=>{const s=a.tempFilePaths[0],t=e("token");h({title:"ä¸Šä¼ ä¸­..."}),x({url:"https://kkbaemygbrzk.ap-northeast-1.clawcloudrun.com/v1/user/avatar",filePath:s,name:"file",header:{Authorization:`Bearer ${t}`},success:a=>{C();try{const e=JSON.parse(a.data);200===e.code?(v({title:"å¤´åƒæ›´æ–°æˆåŠŸ",icon:"success"}),F.value.avatar=e.data.avatar,l("userInfo",F.value)):v({title:e.msg||"ä¸Šä¼ å¤±è´¥",icon:"none"})}catch(e){v({title:"è§£æžå“åº”å¤±è´¥",icon:"none"})}},fail:()=>{C(),v({title:"ç½‘ç»œé”™è¯¯",icon:"none"})}})}})},E=()=>g({url:"/pages/dorm-energy/dorm-energy"}),L=()=>g({url:"/pages/point-mall/point-mall"}),P=()=>{if(!F.value)return B();g({url:"/pages/my-exchange/my-exchange"})},T=()=>{if(!F.value)return B();g({url:"/pages/my-collection/my-collection"})},A=()=>{if(!F.value)return B();g({url:"/pages/my-activity/my-activity"})},J=()=>g({url:"/pages/feedback/feedback"}),K=()=>g({url:"/pages/about-us/about-us"}),N=()=>{m({title:"æç¤º",content:"ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",success:a=>{a.confirm&&(p("userInfo"),F.value=null,v({title:"å·²é€€å‡º",icon:"none"}))}})};return(a,e)=>{const l=y,g=u,m=k;return c(),s(g,{class:"page"},{default:t((()=>[n(g,{class:"header-section"},{default:t((()=>[n(g,{class:"user-info-row",onClick:e[1]||(e[1]=a=>F.value?null:B())},{default:t((()=>[n(g,{class:"avatar-box",onClick:r(D,["stop"])},{default:t((()=>{return[n(l,{src:F.value?(a=F.value.avatar,a?a.startsWith("http")?a:"https://kkbaemygbrzk.ap-northeast-1.clawcloudrun.com"+a:"/static/avatar.png"):"/static/avatar.png",mode:"aspectFill",class:"avatar"},null,8,["src"])];var a})),_:1}),n(g,{class:"info-text",onClick:e[0]||(e[0]=a=>F.value?null:B())},{default:t((()=>[F.value?(c(),i(f,{key:0},[n(m,{class:"nickname"},{default:t((()=>[o(d(F.value.username),1)])),_:1}),n(g,{class:"user-badges"},{default:t((()=>[n(m,{class:"level-tag"},{default:t((()=>[o(d(F.value.level||"èŒèŠ½ Lv.1"),1)])),_:1}),n(m,{class:"days-tag"},{default:t((()=>[o("åŠ å…¥ç¬¬ "+d(F.value.joinDays)+" å¤©",1)])),_:1})])),_:1})],64)):(c(),i(f,{key:1},[n(m,{class:"nickname"},{default:t((()=>[o("ç‚¹å‡»ç™»å½• / æ³¨å†Œ")])),_:1}),n(m,{class:"bio"},{default:t((()=>[o("å¼€å¯ä½ çš„ç»¿è‰²æ ¡å›­ä¹‹æ—…")])),_:1})],64))])),_:1}),F.value?_("",!0):(c(),s(m,{key:0,class:"arrow-right"},{default:t((()=>[o(">")])),_:1}))])),_:1})])),_:1}),n(g,{class:"content-body"},{default:t((()=>[n(g,{class:"points-card"},{default:t((()=>[n(g,{class:"points-header"},{default:t((()=>[n(m,{class:"points-label"},{default:t((()=>[o("æˆ‘çš„çŽ¯ä¿ç§¯åˆ†")])),_:1}),n(g,{class:"points-icon"},{default:t((()=>[o("ðŸŒ±")])),_:1})])),_:1}),n(g,{class:"points-value"},{default:t((()=>[o(d(F.value?F.value.points:"--"),1)])),_:1}),n(g,{class:"points-action"},{default:t((()=>[n(m,{class:"action-text"},{default:t((()=>[o("å½“å‰æŽ’ä½ï¼šå…¨æ ¡å‰ 5%")])),_:1}),n(g,{class:"exchange-btn",onClick:L},{default:t((()=>[o("å…‘æ¢å¥½ç¤¼ >")])),_:1})])),_:1}),n(l,{class:"card-bg-decoration",src:w,mode:"widthFix"})])),_:1}),n(g,{class:"energy-entry",onClick:E},{default:t((()=>[n(g,{class:"entry-left"},{default:t((()=>[n(m,{class:"entry-icon"},{default:t((()=>[o("âš¡")])),_:1}),n(g,{class:"entry-texts"},{default:t((()=>[n(m,{class:"entry-title"},{default:t((()=>[o("å¯å®¤èƒ½è€—å¤§æ¯”æ‹¼")])),_:1}),n(m,{class:"entry-desc"},{default:t((()=>[o("æŸ¥çœ‹æ˜¨æ—¥ç”¨ç”µæŽ’å")])),_:1})])),_:1})])),_:1}),n(g,{class:"entry-right"},{default:t((()=>[n(m,{class:"rank-badge"},{default:t((()=>[o("ç¬¬ 4 å")])),_:1}),n(m,{class:"entry-arrow"},{default:t((()=>[o(">")])),_:1})])),_:1})])),_:1}),n(g,{class:"grid-menu"},{default:t((()=>[n(g,{class:"grid-item",onClick:P},{default:t((()=>[n(g,{class:"grid-icon bg-blue"},{default:t((()=>[n(m,null,{default:t((()=>[o("â™»ï¸")])),_:1})])),_:1}),n(m,{class:"grid-label"},{default:t((()=>[o("æˆ‘çš„æ¼‚æµ")])),_:1})])),_:1}),n(g,{class:"grid-item",onClick:T},{default:t((()=>[n(g,{class:"grid-icon bg-yellow"},{default:t((()=>[n(m,null,{default:t((()=>[o("â­")])),_:1})])),_:1}),n(m,{class:"grid-label"},{default:t((()=>[o("æ¤ç‰©æ”¶è—")])),_:1})])),_:1}),n(g,{class:"grid-item",onClick:A},{default:t((()=>[n(g,{class:"grid-icon bg-green"},{default:t((()=>[n(m,null,{default:t((()=>[o("ðŸš©")])),_:1})])),_:1}),n(m,{class:"grid-label"},{default:t((()=>[o("æˆ‘çš„æ´»åŠ¨")])),_:1})])),_:1}),n(g,{class:"grid-item",onClick:J},{default:t((()=>[n(g,{class:"grid-icon bg-purple"},{default:t((()=>[n(m,null,{default:t((()=>[o("ðŸ“")])),_:1})])),_:1}),n(m,{class:"grid-label"},{default:t((()=>[o("æ„è§åé¦ˆ")])),_:1})])),_:1})])),_:1}),n(g,{class:"list-menu"},{default:t((()=>[n(g,{class:"list-item",onClick:K},{default:t((()=>[n(g,{class:"list-left"},{default:t((()=>[n(m,{class:"item-icon"},{default:t((()=>[o("â„¹ï¸")])),_:1}),n(m,{class:"item-text"},{default:t((()=>[o("å…³äºŽæˆ‘ä»¬")])),_:1})])),_:1}),n(m,{class:"list-arrow"},{default:t((()=>[o(">")])),_:1})])),_:1}),F.value?(c(),s(g,{key:0,class:"list-item",onClick:N},{default:t((()=>[n(g,{class:"list-left"},{default:t((()=>[n(m,{class:"item-icon"},{default:t((()=>[o("ðŸšª")])),_:1}),n(m,{class:"item-text text-red"},{default:t((()=>[o("é€€å‡ºç™»å½•")])),_:1})])),_:1})])),_:1})):_("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-54b8e6c0"]]);export{F as default};
