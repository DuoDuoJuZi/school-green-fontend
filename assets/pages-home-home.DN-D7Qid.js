import{r as a,f as s,g as l,c as t,w as e,i as c,o,a as d,b as n,t as u,n as i,h as r,j as f,F as _,k as m,l as h,m as v,p as g,q as p,u as b,v as y,e as w,d as x,S as k,x as C,y as $,z as E}from"./index-CuaaJPDA.js";import{_ as T}from"./cover.DsjBQlmM.js";import{o as q}from"./uni-app.es.l4NMnEKD.js";import{r as P}from"./request.CEomxEkn.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const A=j({__name:"home",setup(j){const A=a(""),F=a(null),I=a([]),O=a([]),M=a(null),N=a([]),S=a(["å¼ ** é€šè¿‡ éª‘è¡Œ å…‘æ¢äº† 20 ç§¯åˆ†","æŽ** é€šè¿‡ æ­¥è¡Œ å…‘æ¢äº† 50 ç§¯åˆ†","çŽ‹** é€šè¿‡ å…¬äº¤ å…‘æ¢äº† 30 ç§¯åˆ†"]),D=s((()=>{if(!M.value||"--"===M.value.aqi)return"gray";const a=parseInt(M.value.aqi);return a<=50?"green":a<=100?"yellow":a<=150?"orange":a<=200?"red":"purple"})),J=async()=>{try{const a=await P({url:"/mall/records",hideErrorToast:!0});if(a.data&&a.data.length>0){const s=a.data.map((a=>{let s=a.username||"åŒ¿å";return s.length>1&&(s=s[0]+"**"),`${s} å…‘æ¢äº† ${a.goodsName} æ¶ˆè€—äº† ${a.cost} ç§¯åˆ†`}));S.value=[...s,...S.value].slice(0,10)}}catch(a){}},L=a=>{const s=h("userInfo");if(s){s.points=a,$("userInfo",s);let l=s.username;l.length>1&&(l=l[0]+"**"),S.value.unshift(`${l} é€šè¿‡ ç»¿è‰²å‡ºè¡Œ èŽ·å¾—äº† 1000 ç§¯åˆ†`)}},R=()=>{if(!h("token"))return v({url:"/pages/login/login"});g({itemList:["æ­¥è¡Œ","éª‘è¡Œ","å…¬å…±äº¤é€š"],success:()=>{p({title:"ä¸Šä¼ ä¸­..."}),P({url:"/user/points",method:"POST",data:{points:1e3}}).then((a=>{b(),L(a.data.totalPoints),y({title:"æˆåŠŸ",content:`æ­å–œèŽ·å¾— ${a.data.added} ç§¯åˆ†`,showCancel:!1})})).catch((()=>b()))}})};l((()=>{(()=>{const a=new Date;A.value=`${a.getDate()} ${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][a.getMonth()]}`})(),(async()=>{try{const a=await P({url:"/plant/daily",hideErrorToast:!0});a.data&&(F.value=a.data)}catch(a){}})(),(async()=>{try{const a=await P({url:"/exchange/list?type=exchange",hideErrorToast:!0});if(a.data){N.value=a.data.map((a=>({...a,cost:a.price})));const s=[...N.value].sort((()=>.5-Math.random()));I.value=s.slice(0,4)}}catch(a){}})(),(async()=>{try{const a=await P({url:"/tip/list",hideErrorToast:!0});if(a.data){const s=[...a.data].sort((()=>.5-Math.random()));O.value=s.slice(0,2)}}catch(a){}})(),J()})),q((()=>(async()=>{try{const a=await P({url:"/tools/aqi",hideErrorToast:!0});a.data&&(M.value=a.data)}catch(a){M.value={aqi:"--"}}})()));const U=()=>v({url:"/pages/list-plant/list-plant"}),z=()=>v({url:"/pages/list-tips/list-tips"}),G=()=>v({url:"/pages/exchange/exchange"}),B=()=>v({url:"/pages/activity/activity"}),H=()=>v({url:"/pages/trash-identify/trash-identify"}),V=()=>v({url:"/pages/carbon-calculator/carbon-calculator"});return(a,s)=>{const l=w,g=c,$=x,q=E,j=k,N=C;return o(),t(g,{class:"page"},{default:e((()=>[d(g,{class:"hero-section"},{default:e((()=>[d(g,{class:"title-group"},{default:e((()=>[d(l,{class:"brand-text outline"},{default:e((()=>[n("SCHOOL")])),_:1}),d(l,{class:"brand-text solid"},{default:e((()=>[n("GREEN")])),_:1})])),_:1}),d(g,{class:"hero-meta"},{default:e((()=>[d(l,{class:"date-badge"},{default:e((()=>[n(u(A.value),1)])),_:1}),d(l,{class:"welcome-text"},{default:e((()=>[n("æŽ¢ç´¢æ ¡å›­è‡ªç„¶ç”Ÿæ€")])),_:1})])),_:1}),d(g,{class:"hero-image-container"},{default:e((()=>[d($,{class:"hero-img",src:T,mode:"aspectFill"}),d(g,{class:"hero-mask"})])),_:1}),d(g,{class:"glass-dashboard"},{default:e((()=>[d(g,{class:"dash-item"},{default:e((()=>[d(l,{class:"dash-label"},{default:e((()=>[n("ç©ºæ°”è´¨é‡")])),_:1}),d(g,{class:"dash-value-row"},{default:e((()=>[d(l,{class:"dash-num"},{default:e((()=>[n(u(M.value?M.value.aqi:"--"),1)])),_:1}),d(g,{class:i(["status-dot",D.value])},null,8,["class"])])),_:1})])),_:1}),d(g,{class:"vertical-divider"}),d(g,{class:"dash-item"},{default:e((()=>[d(l,{class:"dash-label"},{default:e((()=>[n("æ ¡å›­æ¤æ ª")])),_:1}),d(l,{class:"dash-num"},{default:e((()=>[n("1,284")])),_:1})])),_:1}),d(g,{class:"vertical-divider"}),d(g,{class:"dash-item"},{default:e((()=>[d(l,{class:"dash-label"},{default:e((()=>[n("ä»Šæ—¥é€‚å®œ")])),_:1}),d(l,{class:"dash-text"},{default:e((()=>[n("æˆ·å¤–æ‘„å½± ðŸ“·")])),_:1})])),_:1})])),_:1})])),_:1}),d(g,{class:"nav-strip"},{default:e((()=>[d(g,{class:"nav-item",onClick:U},{default:e((()=>[d(g,{class:"nav-icon-box green-shadow"},{default:e((()=>[d(l,{class:"nav-icon"},{default:e((()=>[n("ðŸŒ¿")])),_:1})])),_:1}),d(l,{class:"nav-text"},{default:e((()=>[n("æ¤ç‰©å›¾é‰´")])),_:1})])),_:1}),d(g,{class:"nav-item",onClick:G},{default:e((()=>[d(g,{class:"nav-icon-box orange-shadow"},{default:e((()=>[d(l,{class:"nav-icon"},{default:e((()=>[n("â™»ï¸")])),_:1})])),_:1}),d(l,{class:"nav-text"},{default:e((()=>[n("æ—§ç‰©æ¼‚æµ")])),_:1})])),_:1}),d(g,{class:"nav-item",onClick:z},{default:e((()=>[d(g,{class:"nav-icon-box blue-shadow"},{default:e((()=>[d(l,{class:"nav-icon"},{default:e((()=>[n("ðŸ“˜")])),_:1})])),_:1}),d(l,{class:"nav-text"},{default:e((()=>[n("çŽ¯ä¿çŸ¥è¯†")])),_:1})])),_:1}),d(g,{class:"nav-item",onClick:B},{default:e((()=>[d(g,{class:"nav-icon-box gray-shadow"},{default:e((()=>[d(l,{class:"nav-icon"},{default:e((()=>[n("ðŸ“…")])),_:1})])),_:1}),d(l,{class:"nav-text"},{default:e((()=>[n("æ´»åŠ¨æ‰“å¡")])),_:1})])),_:1})])),_:1}),d(g,{class:"commute-section"},{default:e((()=>[d(g,{class:"commute-card"},{default:e((()=>[d(g,{class:"commute-header"},{default:e((()=>[d(g,{class:"commute-label"},{default:e((()=>[d(l,{class:"label-icon"},{default:e((()=>[n("ðŸš´")])),_:1}),d(l,{class:"label-text"},{default:e((()=>[n("å®žæ—¶åŠ¨æ€")])),_:1})])),_:1}),d(j,{class:"commute-swiper",vertical:"",autoplay:"",circular:"","disable-touch":"",interval:"3000"},{default:e((()=>[(o(!0),r(_,null,f(S.value,((a,s)=>(o(),t(q,{key:s},{default:e((()=>[d(g,{class:"swiper-item-row"},{default:e((()=>[d(l,{class:"commute-msg"},{default:e((()=>[n(u(a),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),d(g,{class:"commute-divider"}),d(g,{class:"commute-body",onClick:R},{default:e((()=>[d(g,{class:"body-text"},{default:e((()=>[d(l,{class:"body-title"},{default:e((()=>[n("ä¸Šä¼ ç»¿è‰²å‡ºè¡Œè®°å½•")])),_:1}),d(l,{class:"body-desc"},{default:e((()=>[n("æ­¥è¡Œ / éª‘è¡Œ / å…¬äº¤ï¼Œå•æ¬¡æœ€é«˜å¾— 1000 ç§¯åˆ†")])),_:1})])),_:1}),d(g,{class:"action-btn"},{default:e((()=>[n("ç«‹å³ä¸Šä¼ ")])),_:1})])),_:1})])),_:1})])),_:1}),d(g,{class:"section-header content-stream"},{default:e((()=>[d(l,{class:"section-title"},{default:e((()=>[n("æ™ºæ…§åŠ©æ‰‹")])),_:1})])),_:1}),d(g,{class:"tools-grid content-stream"},{default:e((()=>[d(g,{class:"tool-card",onClick:H},{default:e((()=>[d(g,{class:"tool-icon-bg bg-green"},{default:e((()=>[d(l,{class:"tool-icon"},{default:e((()=>[n("ðŸ“¸")])),_:1})])),_:1}),d(g,{class:"tool-info"},{default:e((()=>[d(l,{class:"tool-name"},{default:e((()=>[n("AI åžƒåœ¾è¯†åˆ«")])),_:1}),d(l,{class:"tool-desc"},{default:e((()=>[n("æ‹ç…§æ™ºèƒ½åˆ†ç±»")])),_:1})])),_:1}),d(g,{class:"tool-arrow"},{default:e((()=>[n("â†’")])),_:1})])),_:1}),d(g,{class:"tool-card",onClick:V},{default:e((()=>[d(g,{class:"tool-icon-bg bg-orange"},{default:e((()=>[d(l,{class:"tool-icon"},{default:e((()=>[n("ðŸ‘£")])),_:1})])),_:1}),d(g,{class:"tool-info"},{default:e((()=>[d(l,{class:"tool-name"},{default:e((()=>[n("ç¢³è¶³è¿¹è®¡ç®—")])),_:1}),d(l,{class:"tool-desc"},{default:e((()=>[n("è®°å½•æ¯æ—¥ç¢³æŽ’æ”¾")])),_:1})])),_:1}),d(g,{class:"tool-arrow"},{default:e((()=>[n("â†’")])),_:1})])),_:1})])),_:1}),d(g,{class:"content-stream"},{default:e((()=>[d(g,{class:"section-header"},{default:e((()=>[d(l,{class:"section-title"},{default:e((()=>[n("ä»Šæ—¥ç‰©ç§")])),_:1}),d(l,{class:"section-more",onClick:U},{default:e((()=>[n("æŸ¥çœ‹å›¾é‰´ â†’")])),_:1})])),_:1}),F.value?(o(),t(g,{key:0,class:"featured-card",onClick:s[0]||(s[0]=a=>{return s=F.value.id,v({url:`/pages/detail-plant/detail-plant?id=${s}`});var s})},{default:e((()=>[d($,{class:"featured-img",src:F.value.img,mode:"aspectFill"},null,8,["src"]),d(g,{class:"featured-info"},{default:e((()=>[d(g,{class:"info-blur-bg"},{default:e((()=>[d(l,{class:"plant-name"},{default:e((()=>[n(u(F.value.name),1)])),_:1}),d(l,{class:"plant-desc"},{default:e((()=>[n(u(F.value.desc),1)])),_:1})])),_:1})])),_:1})])),_:1})):m("",!0),d(g,{class:"section-header"},{default:e((()=>[d(l,{class:"section-title"},{default:e((()=>[n("çƒ­é—¨ç½®æ¢")])),_:1}),d(l,{class:"section-more",onClick:G},{default:e((()=>[n("åŽ»æ¼‚æµç«™ â†’")])),_:1})])),_:1}),d(N,{"scroll-x":"",class:"horizontal-scroll","show-scrollbar":!1},{default:e((()=>[d(g,{class:"scroll-inner"},{default:e((()=>[(o(!0),r(_,null,f(I.value,((a,s)=>(o(),t(g,{class:"mini-card",key:s,onClick:s=>(a=>{if(!h("token"))return v({url:"/pages/login/login"});y({title:"ç¡®è®¤å…‘æ¢",content:`æ¶ˆè€— ${a.cost} ç§¯åˆ†å…‘æ¢ ${a.title}ï¼Ÿ`,success:s=>{s.confirm&&(p({title:"å…‘æ¢ä¸­..."}),P({url:"/mall/exchange",method:"POST",data:{goodsId:a.id,cost:a.cost,title:a.title}}).then((a=>{b(),L(a.data.remainingPoints),J(),y({title:"æˆåŠŸ",content:`å‰©ä½™ç§¯åˆ†ï¼š${a.data.remainingPoints}`,showCancel:!1})})).catch((()=>b())))}})})(a)},{default:e((()=>[d($,{class:"mini-img",src:a.img,mode:"aspectFill"},null,8,["src"]),d(g,{class:"mini-tag"},{default:e((()=>[n(u(a.category),1)])),_:2},1024),d(l,{class:"mini-title"},{default:e((()=>[n(u(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),d(g,{class:"section-header"},{default:e((()=>[d(l,{class:"section-title"},{default:e((()=>[n("ç»¿è‰²ç”Ÿæ´»")])),_:1})])),_:1}),d(g,{class:"news-list"},{default:e((()=>[(o(!0),r(_,null,f(O.value,((a,s)=>(o(),t(g,{class:"news-item",key:s,onClick:s=>{return l=a.id,v({url:`/pages/detail-tips/detail-tips?id=${l}`});var l}},{default:e((()=>[d(g,{class:"news-content"},{default:e((()=>[d(l,{class:"news-title"},{default:e((()=>[n(u(a.title),1)])),_:2},1024),d(l,{class:"news-meta"},{default:e((()=>[n(u(a.meta),1)])),_:2},1024)])),_:2},1024),d($,{class:"news-thumb",src:a.img,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-05e033dc"]]);export{A as default};
