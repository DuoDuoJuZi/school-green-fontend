import{r as a,A as e,B as l,c as t,w as s,k as c,i as o,o as i,a as u,b as n,t as d,d as r,e as f}from"./index-CuaaJPDA.js";import{a as _}from"./uni-app.es.l4NMnEKD.js";import{r as m}from"./request.CEomxEkn.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=v({__name:"detail-plant",setup(v){const p=a(null);_((a=>{const e=a.id;e&&g(e)}));const g=async a=>{try{const l=await m({url:`/plant/detail?id=${a}`});l.data&&(p.value=l.data,p.value.img&&!p.value.img.startsWith("http")&&(p.value.img="https://kkbaemygbrzk.ap-northeast-1.clawcloudrun.com"+p.value.img),e({title:p.value.name}))}catch(t){l({title:"加载失败",icon:"none"})}},h=async()=>{try{const a=await m({url:`/plant/collect?id=${p.value.id}`,method:"PUT"});200===a.code&&(p.value.isCollected=a.data.isCollected,l({title:a.msg,icon:"none"}))}catch(a){l({title:"操作失败",icon:"none"})}};return(a,e)=>{const l=r,_=o,m=f;return p.value?(i(),t(_,{key:0,class:"container"},{default:s((()=>[u(_,{class:"hero-image-box"},{default:s((()=>[u(l,{src:p.value.img,mode:"aspectFill",class:"hero-img"},null,8,["src"])])),_:1}),u(_,{class:"content-body"},{default:s((()=>[u(_,{class:"header-section"},{default:s((()=>[u(_,{class:"title-row"},{default:s((()=>[u(m,{class:"main-title"},{default:s((()=>[n(d(p.value.name),1)])),_:1}),u(_,{class:"collect-btn",onClick:h},{default:s((()=>[u(m,{class:"collect-icon"},{default:s((()=>[n(d(p.value.isCollected?"★":"☆"),1)])),_:1}),u(m,{class:"collect-text"},{default:s((()=>[n(d(p.value.isCollected?"已收藏":"收藏"),1)])),_:1})])),_:1})])),_:1}),u(_,{class:"tag"},{default:s((()=>[n(d(p.value.category),1)])),_:1}),u(m,{class:"latin-name"},{default:s((()=>[n(d(p.value.latinName),1)])),_:1})])),_:1}),u(_,{class:"info-card"},{default:s((()=>[u(_,{class:"info-row"},{default:s((()=>[u(m,{class:"label"},{default:s((()=>[n("花期")])),_:1}),u(m,{class:"value"},{default:s((()=>[n(d(p.value.bloomTime),1)])),_:1})])),_:1}),u(_,{class:"divider"}),u(_,{class:"info-row"},{default:s((()=>[u(m,{class:"label"},{default:s((()=>[n("位置")])),_:1}),u(m,{class:"value"},{default:s((()=>[n(d(p.value.location),1)])),_:1})])),_:1})])),_:1}),u(_,{class:"section"},{default:s((()=>[u(m,{class:"section-title"},{default:s((()=>[n("植物介绍")])),_:1}),u(m,{class:"section-text"},{default:s((()=>[n(d(p.value.description),1)])),_:1})])),_:1}),u(_,{class:"section"},{default:s((()=>[u(m,{class:"section-title"},{default:s((()=>[n("校园分布与趣闻")])),_:1}),u(m,{class:"section-text"},{default:s((()=>[n(d(p.value.funFact),1)])),_:1})])),_:1})])),_:1})])),_:1})):c("",!0)}}},[["__scopeId","data-v-2b5e326e"]]);export{p as default};
